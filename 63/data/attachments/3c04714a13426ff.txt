const jsonData = pm.response.json();

pm.test("Response status code is 400", () => {
    pm.response.to.have.status(400);
});

pm.test("Response body contains expected fields", () => {
    pm.expect(jsonData).to.have.property("data", "");
    pm.test("Response body contains a message", () => {
    pm.expect(jsonData).to.have.property("message").that.is.a("string").and.not.be.empty;
});
    
    pm.expect(jsonData).to.have.property("isSuccessful", false);
});

pm.test("Response structure is correct", () => {
    pm.expect(jsonData).to.have.property("messages").that.is.an("array");
    pm.expect(jsonData.messages).to.be.empty;
    pm.expect(jsonData).to.have.property("timeGenerated").that.is.a("string");
});